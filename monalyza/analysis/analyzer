import logging
from scipy import stats
# from monalyza.analysis import loader
import loader


class Analyzer:
    """Analyze the measurements."""

    def __init__(self, *measurements: str) -> None:
        self.data = []
        for entry in measurements:
            self.data.append(loader.Loader(entry))

    def measurements_are_valid(self) -> bool:
        """Validate measurements with Kruskal Wallis test."""
        logging.debug("Computing Kruskal Wallis")
        measurements = []
        for entry in self.data:
            measurements.append(entry.combine_and_get_column('time', 'cpu'))

        return stats.kruskal(*measurements)[1] > 0.05
